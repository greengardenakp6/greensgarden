<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Checkout - Green Garden</title>
    <link rel="manifest" href="manifest.json">
    
    <!-- Fonts & Icons -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Playfair+Display:wght@400;600;700&family=Inter:wght@300;400;500;600&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">

    <style>
        :root {
            --primary-green: #174e1e; /* Deep Forest Green */
            --accent-gold: #d4af37; /* Luxury Gold */
            --white: #ffffff;
            --glass-bg: rgba(255, 255, 255, 0.75);
            --glass-border: rgba(255, 255, 255, 0.4);
            --text-main: #1a1a1a;
            --text-muted: #666;
            --shadow-soft: 0 20px 60px rgba(0, 0, 0, 0.15);
            --shadow-card: 0 30px 60px rgba(0,0,0,0.12);
            --transition-premium: cubic-bezier(0.25, 0.46, 0.45, 0.94); /* Smooth ease-out */
        }

        * { margin: 0; padding: 0; box-sizing: border-box; }

        body {
            font-family: 'Inter', sans-serif;
            min-height: 100vh;
            /* PREMIUM DARK BOTANICAL BACKGROUND */
            background-image: url('https://images.unsplash.com/photo-1518531933037-91b2f5f229cc?q=80&w=2070&auto=format&fit=crop');
            background-size: cover;
            background-attachment: fixed;
            background-position: center;
            color: var(--text-main);
            position: relative;
            overflow-x: hidden;
        }

        /* Overlay for better contrast */
        body::before {
            content: '';
            position: fixed; top: 0; left: 0; width: 100%; height: 100%;
            background: linear-gradient(to bottom, rgba(0,0,0,0.3), rgba(0,0,0,0.1));
            z-index: -1;
        }

        /* --- ANIMATIONS --- */
        @keyframes slideDown {
            from { opacity: 0; transform: translateY(-100%); }
            to { opacity: 1; transform: translateY(0); }
        }
        @keyframes slideInLeft {
            from { opacity: 0; transform: translateX(-60px); }
            to { opacity: 1; transform: translateX(0); }
        }
        @keyframes slideInRight {
            from { opacity: 0; transform: translateX(60px); }
            to { opacity: 1; transform: translateX(0); }
        }
        @keyframes fadeUp {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }

        /* --- NAVBAR --- */
        .navbar {
            background: rgba(255, 255, 255, 0.85);
            backdrop-filter: blur(20px);
            padding: 1.2rem 3rem;
            display: flex;
            align-items: center;
            box-shadow: 0 4px 30px rgba(0,0,0,0.1);
            position: sticky;
            top: 0;
            z-index: 100;
            border-bottom: 1px solid rgba(255,255,255,0.6);
            animation: slideDown 0.8s var(--transition-premium);
        }

        .back-btn {
            display: flex;
            align-items: center;
            gap: 10px;
            text-decoration: none;
            color: var(--text-main);
            font-weight: 600;
            padding: 10px 20px;
            border-radius: 50px;
            background: rgba(0,0,0,0.03);
            border: 1px solid rgba(0,0,0,0.05);
            transition: all 0.4s var(--transition-premium);
        }

        .back-btn:hover {
            background: var(--primary-green);
            color: white;
            transform: translateX(-5px);
            box-shadow: 0 10px 20px rgba(23, 78, 30, 0.2);
        }

        .navbar-title {
            flex: 1;
            text-align: center;
            font-family: 'Playfair Display', serif;
            font-size: 1.6rem;
            font-weight: 700;
            letter-spacing: 1px;
            color: var(--primary-green);
        }

        /* --- LAYOUT --- */
        .main-container {
            display: grid;
            grid-template-columns: 0.9fr 1.1fr;
            gap: 40px;
            max-width: 1300px;
            margin: 0 auto;
            padding: 40px 30px;
        }

        /* --- CARDS --- */
        .card {
            background: var(--glass-bg);
            backdrop-filter: blur(25px);
            -webkit-backdrop-filter: blur(25px);
            border-radius: 24px;
            border: 1px solid var(--glass-border);
            box-shadow: var(--shadow-card);
            padding: 35px;
            transition: transform 0.5s var(--transition-premium), box-shadow 0.5s ease;
        }

        .card:hover {
            transform: translateY(-5px);
            box-shadow: 0 40px 70px rgba(0,0,0,0.15);
        }

        /* Staggered Animation for Cards */
        .order-summary-card {
            animation: slideInLeft 1s 0.3s var(--transition-premium) backwards;
        }
        .checkout-form-card {
            animation: slideInRight 1s 0.5s var(--transition-premium) backwards;
        }

        .section-title {
            font-family: 'Playfair Display', serif;
            font-size: 1.4rem;
            margin-bottom: 25px;
            display: flex;
            align-items: center;
            gap: 12px;
            color: var(--primary-green);
        }
        .section-title i { color: var(--accent-gold); }

        /* --- FORM STYLING --- */
        .form-group { margin-bottom: 18px; position: relative; }
        
        .input-icon {
            position: absolute;
            left: 18px;
            top: 50%;
            transform: translateY(-50%);
            color: #aaa;
            transition: color 0.3s;
            z-index: 2;
        }

        .form-input {
            width: 100%;
            padding: 16px 16px 16px 50px;
            border: 2px solid transparent;
            background: rgba(255, 255, 255, 0.6);
            border-radius: 12px;
            font-size: 0.95rem;
            transition: all 0.4s var(--transition-premium);
            outline: none;
        }

        .form-input:focus {
            background: var(--white);
            border-color: var(--primary-green);
            box-shadow: 0 10px 25px rgba(23, 78, 30, 0.1);
            transform: translateY(-2px);
        }

        .form-input:focus + .input-icon { color: var(--primary-green); }

        /* --- PAYMENT UI --- */
        .payment-grid {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 20px;
            margin-bottom: 25px;
        }

        .payment-card {
            border: 1px solid rgba(0,0,0,0.05);
            background: rgba(255,255,255,0.4);
            border-radius: 16px;
            padding: 20px;
            text-align: center;
            cursor: pointer;
            transition: all 0.4s var(--transition-premium);
            position: relative;
            overflow: hidden;
        }

        .payment-card::before {
            content: ''; position: absolute; top: 0; left: 0; width: 100%; height: 100%;
            background: linear-gradient(135deg, transparent, rgba(255,255,255,0.5));
            opacity: 0; transition: opacity 0.3s;
        }

        .payment-card:hover {
            transform: translateY(-5px) scale(1.02);
            box-shadow: 0 15px 30px rgba(0,0,0,0.1);
        }
        
        .payment-card:hover::before { opacity: 1; }

        .payment-card.active {
            border-color: var(--primary-green);
            background: rgba(23, 78, 30, 0.05);
            box-shadow: 0 10px 20px rgba(23, 78, 30, 0.15);
        }

        .payment-card i { font-size: 1.8rem; color: var(--primary-green); margin-bottom: 10px; display: block; transition: transform 0.3s; }
        .payment-card:hover i { transform: scale(1.2); }
        .payment-card span { font-size: 0.95rem; font-weight: 600; color: var(--text-main); }
        .payment-card small { display: block; font-size: 0.75rem; color: var(--text-muted); margin-top: 4px; }

        /* Dynamic Payment Details - Smooth Open */
        .payment-details-box {
            max-height: 0;
            overflow: hidden;
            opacity: 0;
            background: rgba(255,255,255,0.5);
            border-radius: 16px;
            transition: max-height 0.5s var(--transition-premium), opacity 0.3s, margin 0.3s;
            margin-bottom: 0;
            border: none;
        }
        
        .payment-details-box.active {
            max-height: 500px; /* Sufficient height */
            opacity: 1;
            margin-bottom: 25px;
            padding: 25px;
            border: 1px solid rgba(0,0,0,0.05);
        }

        /* --- ORDER SUMMARY --- */
        .summary-item {
            display: flex;
            gap: 20px;
            padding: 15px 0;
            border-bottom: 1px solid rgba(0,0,0,0.05);
            animation: fadeUp 0.5s ease backwards;
        }
        .summary-item img {
            width: 70px;
            height: 70px;
            object-fit: cover;
            border-radius: 12px;
            box-shadow: 0 4px 10px rgba(0,0,0,0.1);
        }
        .item-info h4 { font-size: 1rem; margin-bottom: 5px; font-family: 'Playfair Display', serif; }
        .item-info p { font-size: 0.85rem; color: var(--text-muted); }
        .item-price { margin-left: auto; font-weight: 700; color: var(--primary-green); font-size: 1.1rem; }

        .summary-total {
            margin-top: 20px;
            padding-top: 20px;
            border-top: 2px solid rgba(0,0,0,0.1);
            display: flex;
            justify-content: space-between;
            font-size: 1.3rem;
            font-weight: 700;
            font-family: 'Playfair Display', serif;
        }

        /* --- BUTTON --- */
        .btn-place-order {
            width: 100%;
            padding: 18px;
            background: linear-gradient(135deg, var(--primary-green), #2e7d32);
            color: white;
            border: none;
            border-radius: 12px;
            font-size: 1.1rem;
            font-weight: 600;
            cursor: pointer;
            display: flex;
            justify-content: center;
            align-items: center;
            gap: 12px;
            transition: all 0.4s var(--transition-premium);
            box-shadow: 0 10px 30px rgba(23, 78, 30, 0.2);
            position: relative;
            overflow: hidden;
        }

        .btn-place-order::after {
            content: ''; position: absolute; top: 0; left: -100%; width: 100%; height: 100%;
            background: linear-gradient(90deg, transparent, rgba(255,255,255,0.2), transparent);
            transition: left 0.5s;
        }

        .btn-place-order:hover {
            transform: translateY(-3px);
            box-shadow: 0 15px 40px rgba(23, 78, 30, 0.3);
        }
        .btn-place-order:hover::after { left: 100%; } /* Shine effect */
        
        .btn-place-order:disabled { background: #ccc; cursor: not-allowed; transform: none; box-shadow: none; }

        /* --- MODAL --- */
        .success-overlay {
            position: fixed; top: 0; left: 0; width: 100%; height: 100%;
            background: rgba(0,0,0,0.7);
            backdrop-filter: blur(10px);
            display: flex; justify-content: center; align-items: center;
            z-index: 200; opacity: 0; visibility: hidden; transition: all 0.5s;
        }
        .success-overlay.show { opacity: 1; visibility: visible; }
        
        .success-modal {
            background: white; padding: 50px; border-radius: 24px; text-align: center;
            max-width: 450px; 
            transform: scale(0.5) rotateX(45deg);
            transition: transform 0.6s var(--transition-premium);
            box-shadow: 0 30px 60px rgba(0,0,0,0.2);
        }
        .success-overlay.show .success-modal { transform: scale(1) rotateX(0); }
        
        .success-icon { width: 80px; height: 80px; background: #e8f5e9; border-radius: 50%; display: flex; justify-content: center; align-items: center; margin: 0 auto 20px; box-shadow: inset 0 2px 10px rgba(0,0,0,0.1); }
        .success-icon i { font-size: 2.5rem; color: var(--primary-green); }
        .success-title { font-family: 'Playfair Display', serif; font-size: 1.8rem; font-weight: 700; margin-bottom: 10px; }
        .success-desc { color: var(--text-muted); margin-bottom: 25px; line-height: 1.6; }

        /* Responsive */
        @media (max-width: 900px) {
            .main-container {
                grid-template-columns: 1fr;
                padding: 20px;
            }
            .order-summary-card { animation: fadeUp 1s 0.3s backwards; }
            .checkout-form-card { animation: fadeUp 1s 0.5s backwards; }
        }
    </style>
</head>
<body>

    <nav class="navbar">
        <a href="products.html" class="back-btn">
            <i class="fas fa-arrow-left"></i> Continue Shopping
        </a>
        <div class="navbar-title">Secure Checkout</div>
        <div style="width: 150px;"></div>
    </nav>

    <div class="main-container">
        
        <!-- Left Column: Order Summary -->
        <div class="card order-summary-card">
            <h3 class="section-title"><i class="fas fa-leaf"></i> Your Order</h3>
            
            <div id="summaryItems">
                <div class="summary-item">
                    <img src="https://images.unsplash.com/photo-1459411552884-841db9b3cc2a?q=80&w=300&auto=format&fit=crop" alt="Plant">
                    <div class="item-info">
                        <h4>Exotic Monstera</h4>
                        <p>Premium Indoor Plant</p>
                    </div>
                    <div class="item-price">₹1,299</div>
                </div>
            </div>

            <div class="form-group" style="margin-top: 30px;">
                <label style="font-size: 0.9rem; color: var(--text-muted); margin-bottom: 10px; display: block; font-weight: 600;">Promo Code</label>
                <div style="display: flex; gap: 12px;">
                    <input type="text" id="coupon" class="form-input" style="padding-left: 20px;" placeholder="Enter code">
                    <button class="btn-apply" style="padding: 0 25px; background: var(--accent-gold); color: white; border: none; border-radius: 10px; cursor: pointer; font-weight: 600;">Apply</button>
                </div>
            </div>

            <div style="background: rgba(0,0,0,0.03); padding: 15px; border-radius: 12px; margin-top: 20px;">
                <div style="display: flex; justify-content: space-between; margin-bottom: 10px; color: var(--text-muted); font-size: 0.9rem;">
                    <span>Subtotal</span> <span>₹1,299</span>
                </div>
                <div style="display: flex; justify-content: space-between; margin-bottom: 10px; color: var(--text-muted); font-size: 0.9rem;">
                    <span>Shipping</span> <span style="color: var(--primary-green);">Free</span>
                </div>
            </div>

            <div class="summary-total">
                <span>Total</span>
                <span>₹1,299</span>
            </div>
        </div>

        <!-- Right Column: Checkout Form -->
        <div class="card checkout-form-card">
            
            <!-- Shipping -->
            <h3 class="section-title"><i class="fas fa-shipping-fast"></i> Shipping Address</h3>
            <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 20px;">
                <div class="form-group">
                    <input type="text" id="full-name" class="form-input" placeholder="Full Name" required>
                    <i class="fas fa-user input-icon"></i>
                </div>
                <div class="form-group">
                    <input type="tel" id="phone" class="form-input" placeholder="Phone Number" required>
                    <i class="fas fa-phone-alt input-icon"></i>
                </div>
            </div>
            <div class="form-group">
                <input type="text" id="address" class="form-input" placeholder="Street Address" required>
                <i class="fas fa-map-marker-alt input-icon"></i>
            </div>

            <!-- Payment -->
            <h3 class="section-title" style="margin-top: 40px;"><i class="fas fa-credit-card"></i> Payment Method</h3>
            
            <div class="payment-grid">
                <div class="payment-card" onclick="selectPayment('upi')">
                    <i class="fas fa-qrcode"></i>
                    <span>UPI</span>
                    <small>GPay, PhonePe</small>
                </div>
                <div class="payment-card" onclick="selectPayment('creditcard')">
                    <i class="fas fa-credit-card-blank"></i>
                    <span>Card</span>
                    <small>Visa, Mastercard</small>
                </div>
                <div class="payment-card" onclick="selectPayment('netbanking')">
                    <i class="fas fa-university"></i>
                    <span>Net Banking</span>
                    <small>All Major Banks</small>
                </div>
                <div class="payment-card" onclick="selectPayment('cashondelivery')">
                    <i class="fas fa-money-bill-wave"></i>
                    <span>COD</span>
                    <small>Cash on Delivery</small>
                </div>
            </div>

            <div id="payment-fields">
                <!-- UPI -->
                <div id="upi-fields" class="payment-details-box">
                    <div class="form-group">
                        <input type="text" id="upi-id" class="form-input" placeholder="Enter UPI ID (e.g. name@upi)">
                        <i class="fas fa-at input-icon"></i>
                    </div>
                    <div style="text-align: center; margin-top: 10px;">
                        <img src="qr.png" alt="QR" style="width: 120px; border-radius: 8px; border: 1px solid #eee;">
                        <p style="font-size: 0.8rem; color: var(--text-muted); margin-top: 8px;">Or scan QR to pay</p>
                    </div>
                </div>

                <!-- Card -->
                <div id="creditcard-fields" class="payment-details-box">
                    <div class="form-group">
                        <input type="text" id="card-number" class="form-input" placeholder="Card Number" maxlength="19">
                        <i class="fas fa-credit-card input-icon"></i>
                    </div>
                    <div class="form-group">
                        <input type="text" id="card-name" class="form-input" placeholder="Name on Card">
                        <i class="fas fa-user input-icon"></i>
                    </div>
                    <div style="display: flex; gap: 20px;">
                        <div class="form-group" style="flex: 1;">
                            <input type="text" id="card-expiry" class="form-input" placeholder="MM/YY">
                            <i class="fas fa-calendar input-icon"></i>
                        </div>
                        <div class="form-group" style="flex: 1;">
                            <input type="password" id="card-cvv" class="form-input" placeholder="CVV" maxlength="4">
                            <i class="fas fa-lock input-icon"></i>
                        </div>
                    </div>
                </div>

                <!-- Net Banking -->
                <div id="netbanking-fields" class="payment-details-box">
                    <div class="form-group">
                        <select id="bank-name" class="form-input" style="padding-left: 50px; cursor: pointer;">
                            <option value="">Select Your Bank</option>
                            <option value="SBI">State Bank of India</option>
                            <option value="HDFC">HDFC Bank</option>
                            <option value="ICICI">ICICI Bank</option>
                            <option value="Axis">Axis Bank</option>
                        </select>
                        <i class="fas fa-university input-icon"></i>
                    </div>
                </div>

                <!-- COD -->
                <div id="cashondelivery-fields" class="payment-details-box" style="text-align: center; padding: 30px;">
                    <i class="fas fa-hand-holding-usd" style="font-size: 2.5rem; color: var(--accent-gold); margin-bottom: 15px;"></i>
                    <p style="font-weight: 500; font-size: 1.1rem;">Pay with Cash</p>
                    <p style="font-size: 0.9rem; color: var(--text-muted); margin-top: 5px;">Additional handling fee may apply.</p>
                </div>
            </div>

            <button class="btn-place-order" id="placeOrderBtn" onclick="placeOrder()">
                <span>Place Order</span>
                <i class="fas fa-arrow-right"></i>
            </button>

        </div>
    </div>

    <!-- Success Modal -->
    <div id="successModal" class="success-overlay">
        <div class="success-modal">
            <div class="success-icon">
                <i class="fas fa-check"></i>
            </div>
            <h2 class="success-title">Order Confirmed</h2>
            <p class="success-desc">Thank you for choosing Green Garden. Your order has been placed and is being processed.</p>
            <p style="font-weight: bold; margin-bottom: 25px; color: var(--text-muted);">Order ID: <span id="orderIdDisplay" style="color: var(--primary-green);">#ORD12345</span></p>
            <button onclick="window.location.href='orders.html'" style="width: 100%; padding: 14px; background: var(--primary-green); color: white; border: none; border-radius: 10px; cursor: pointer; font-weight: 600; font-size: 1rem;">Track Order</button>
        </div>
    </div>

    <script>
        // Handle Payment Method Selection with Smooth Transition
        let selectedMethod = null;

        function selectPayment(method) {
            selectedMethod = method;
            
            // Update UI for selected card
            document.querySelectorAll('.payment-card').forEach(card => card.classList.remove('active'));
            // Use event.currentTarget to target the div, not child elements
            event.currentTarget.classList.add('active');

            // Handle smooth transition for fields
            document.querySelectorAll('.payment-details-box').forEach(div => div.classList.remove('active'));
            document.getElementById(method + '-fields').classList.add('active');
        }

        // Validation Logic
        function placeOrder() {
            const name = document.getElementById("full-name").value;
            const address = document.getElementById("address").value;
            const phone = document.getElementById("phone").value;
            
            // 1. Validate Shipping
            if (!name || !address || !phone) {
                showError("Please fill in all shipping details.");
                return;
            }

            const phoneRegex = /^[0-9]{10}$/;
            if (!phoneRegex.test(phone)) {
                showError("Please enter a valid 10-digit phone number.");
                return;
            }

            // 2. Validate Payment Selection
            if (!selectedMethod) {
                showError("Please select a payment method.");
                return;
            }

            // 3. Validate Payment Fields
            if (selectedMethod === 'upi') {
                const upi = document.getElementById("upi-id").value;
                if (!upi.includes('@')) { showError("Enter valid UPI ID"); return; }
            } else if (selectedMethod === 'creditcard') {
                const cNum = document.getElementById("card-number").value;
                const cName = document.getElementById("card-name").value;
                const cExp = document.getElementById("card-expiry").value;
                const cCvv = document.getElementById("card-cvv").value;
                if (cNum.length < 16 || !cName || !cExp || !cCvv) {
                    showError("Please fill complete card details."); return;
                }
            } else if (selectedMethod === 'netbanking') {
                const bank = document.getElementById("bank-name").value;
                if (!bank) { showError("Please select a bank."); return; }
            }

            // 4. Process Order
            const btn = document.getElementById('placeOrderBtn');
            btn.disabled = true;
            btn.innerHTML = '<i class="fas fa-spinner fa-spin"></i> Processing Payment...';

            setTimeout(() => {
                const orderId = "ORD" + Math.floor(Math.random() * 1000000);
                
                // Save to LocalStorage
                const order = {
                    orderId: orderId,
                    customer: { name, address, phone },
                    product: { name: "Exotic Monstera", price: 1299 },
                    paymentMethod: selectedMethod,
                    date: new Date().toISOString(),
                    status: selectedMethod === 'cashondelivery' ? "Pending" : "Paid"
                };

                let orders = JSON.parse(localStorage.getItem("orders")) || [];
                orders.push(order);
                localStorage.setItem("orders", JSON.stringify(orders));

                // Show Success Modal
                document.getElementById('orderIdDisplay').innerText = orderId;
                document.getElementById('successModal').classList.add('show');
                
                btn.innerHTML = '<i class="fas fa-check"></i> Done';
            }, 2000); // Slightly longer delay for premium feel
        }

        function showError(msg) {
            alert(msg); // Keeping simple for now, but you can style this
        }
    </script>
</body>
</html>
