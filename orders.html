<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=yes">
    <title>My Orders Â· Green Garden</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:opsz,wght@14..32,300;14..32,400;14..32,500;14..32,600;14..32,700&family=Playfair+Display:wght@600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/qrcodejs/1.0.0/qrcode.min.js"></script>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            background: linear-gradient(180deg, #e8f3e0 0%, #f5faf0 50%, #e8f3e0 100%);
            font-family: 'Inter', sans-serif;
            color: #1f3a1f;
            line-height: 1.5;
            min-height: 100vh;
        }

        :root {
            --moss: #2f5e3c;
            --sage: #6b8f6b;
            --leaf: #3f7846;
            --deep-forest: #1b3b1f;
            --accent-gold: #c2a144;
            --cream: #fdfcf8;
            --shadow-sm: 0 10px 25px -8px rgba(30, 60, 20, 0.15);
            --shadow-hover: 0 25px 35px -12px rgba(30, 70, 30, 0.25);
            --transition-premium: all 0.4s cubic-bezier(0.23, 1, 0.32, 1);
        }

        /* Decorative Background Elements */
        .bg-decoration {
            position: fixed;
            pointer-events: none;
            z-index: 0;
            opacity: 0.4;
        }

        .bg-leaf-1 {
            top: 10%;
            left: -50px;
            width: 200px;
            height: 200px;
            background: radial-gradient(ellipse at center, #a8d5a2 0%, transparent 70%);
            border-radius: 50%;
            animation: floatLeaf 20s ease-in-out infinite;
        }

        .bg-leaf-2 {
            bottom: 20%;
            right: -80px;
            width: 300px;
            height: 300px;
            background: radial-gradient(ellipse at center, #c5e8c0 0%, transparent 70%);
            border-radius: 50%;
            animation: floatLeaf 25s ease-in-out infinite reverse;
        }

        .bg-leaf-3 {
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            width: 600px;
            height: 600px;
            background: radial-gradient(ellipse at center, rgba(168, 213, 162, 0.3) 0%, transparent 60%);
            border-radius: 50%;
        }

        @keyframes floatLeaf {
            0%, 100% { transform: translate(0, 0) rotate(0deg); }
            25% { transform: translate(20px, -30px) rotate(5deg); }
            50% { transform: translate(-10px, 20px) rotate(-3deg); }
            75% { transform: translate(30px, 10px) rotate(2deg); }
        }

        /* Premium Navbar */
        .navbar {
            position: sticky;
            top: 0;
            z-index: 1000;
            background: linear-gradient(135deg, #0d3d2a 0%, #1a6b42 50%, #0d3d2a 100%);
            padding: 14px 28px;
            display: flex;
            align-items: center;
            justify-content: space-between;
            backdrop-filter: blur(12px);
            -webkit-backdrop-filter: blur(12px);
            box-shadow: 0 8px 32px rgba(0, 0, 0, 0.3), inset 0 1px 0 rgba(255,255,255,0.1);
            border-bottom: 1px solid rgba(255,255,255,0.08);
            transition: all 0.5s cubic-bezier(.4,0,.2,1);
            flex-wrap: wrap;
            gap: 12px;
        }

        .navbar::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: url("data:image/svg+xml,%3Csvg viewBox='0 0 100 100' xmlns='http://www.w3.org/2000/svg'%3E%3Cpath d='M20,30 Q40,10 60,30 T100,30' fill='none' stroke='rgba(255,255,255,0.03)' stroke-width='1'/%3E%3C/svg%3E");
            pointer-events: none;
        }

        .navbar.shrink {
            padding: 10px 28px;
            background: rgba(13, 61, 42, 0.95);
        }

        .logo {
            font-family: 'Playfair Display', serif;
            font-size: 26px;
            font-weight: 700;
            color: white;
            letter-spacing: 0.5px;
            text-decoration: none;
            display: flex;
            align-items: center;
            gap: 12px;
            position: relative;
        }

        .logo-icon {
            width: 42px;
            height: 42px;
            background: linear-gradient(135deg, #4ade80, #22c55e);
            border-radius: 12px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 20px;
            box-shadow: 0 4px 12px rgba(74, 222, 128, 0.3);
            transition: transform 0.3s ease;
        }

        .navbar:hover .logo-icon {
            transform: rotate(-10deg) scale(1.05);
        }

        .logo-text {
            display: flex;
            flex-direction: column;
            line-height: 1.1;
        }

        .logo-sub {
            font-family: 'Inter', sans-serif;
            font-size: 9px;
            font-weight: 500;
            letter-spacing: 3px;
            color: #a7f3d0;
            text-transform: uppercase;
            margin-top: 2px;
        }

        .nav-links {
            display: flex;
            gap: 10px;
            align-items: center;
        }

        .nav-link {
            color: rgba(255,255,255,0.9);
            text-decoration: none;
            font-weight: 500;
            font-size: 0.88rem;
            display: flex;
            align-items: center;
            gap: 8px;
            padding: 10px 18px;
            border-radius: 50px;
            background: rgba(255,255,255,0.08);
            border: 1px solid rgba(255,255,255,0.06);
            transition: var(--transition-premium);
            position: relative;
        }

        .nav-link.active {
            background: linear-gradient(135deg, #4ade80, #22c55e);
            color: #0d3d2a;
            border-color: transparent;
            box-shadow: 0 4px 15px rgba(74, 222, 128, 0.4);
        }

        .nav-link:hover:not(.active) {
            background: rgba(255,255,255,0.15);
            transform: translateY(-2px);
        }

        .cart-badge {
            position: absolute;
            top: -6px;
            right: -6px;
            background: linear-gradient(135deg, #fbbf24, #f59e0b);
            color: #1a1a1a;
            font-size: 11px;
            font-weight: 700;
            min-width: 22px;
            height: 22px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            box-shadow: 0 2px 8px rgba(251, 191, 36, 0.5);
            animation: badgePop 0.3s ease;
        }

        @keyframes badgePop {
            0% { transform: scale(0); }
            50% { transform: scale(1.2); }
            100% { transform: scale(1); }
        }

        /* Main Container */
        .container {
            max-width: 1000px;
            margin: 30px auto;
            padding: 0 20px;
            position: relative;
            z-index: 1;
        }

        .page-header {
            text-align: center;
            margin-bottom: 40px;
            padding: 30px 20px;
            background: linear-gradient(135deg, rgba(255,255,255,0.9), rgba(248,252,245,0.95));
            border-radius: 32px;
            border: 1px solid rgba(200, 220, 180, 0.5);
            box-shadow: var(--shadow-sm);
        }

        .page-title {
            font-family: 'Playfair Display', serif;
            font-size: 2.2rem;
            font-weight: 700;
            color: #1a4d2e;
            margin-bottom: 8px;
        }

        .page-subtitle {
            color: #5a8a5a;
            font-size: 0.95rem;
        }

        /* Order Card Premium */
        .order-card {
            background: linear-gradient(145deg, rgba(255, 255, 252, 0.95), rgba(250, 255, 248, 0.98));
            backdrop-filter: blur(10px);
            border: 1px solid rgba(200, 220, 180, 0.5);
            border-radius: 28px;
            padding: 28px;
            margin-bottom: 24px;
            box-shadow: var(--shadow-sm);
            transition: var(--transition-premium);
            position: relative;
            overflow: hidden;
        }

        .order-card::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            height: 4px;
            background: linear-gradient(90deg, #4ade80, #22c55e, #16a34a);
            opacity: 0;
            transition: opacity 0.3s ease;
        }

        .order-card:hover {
            border-color: #9bbf8f;
            box-shadow: var(--shadow-hover);
            transform: translateY(-4px);
        }

        .order-card:hover::before {
            opacity: 1;
        }

        /* Real-time Status Banner */
        .status-banner {
            display: flex;
            align-items: center;
            gap: 12px;
            padding: 12px 18px;
            border-radius: 20px;
            margin-bottom: 20px;
            font-size: 0.85rem;
            font-weight: 600;
        }

        .status-banner.processing {
            background: linear-gradient(135deg, #fef3c7, #fde68a);
            color: #92400e;
            border: 1px solid #fcd34d;
        }

        .status-banner.shipped {
            background: linear-gradient(135deg, #dbeafe, #bfdbfe);
            color: #1e40af;
            border: 1px solid #93c5fd;
        }

        .status-banner.delivered {
            background: linear-gradient(135deg, #d1fae5, #a7f3d0);
            color: #065f46;
            border: 1px solid #6ee7b7;
        }

        .status-icon {
            width: 32px;
            height: 32px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 14px;
        }

        .status-banner.processing .status-icon {
            background: #f59e0b;
            color: white;
            animation: pulse 2s infinite;
        }

        .status-banner.shipped .status-icon {
            background: #3b82f6;
            color: white;
        }

        .status-banner.delivered .status-icon {
            background: #10b981;
            color: white;
        }

        @keyframes pulse {
            0%, 100% { transform: scale(1); opacity: 1; }
            50% { transform: scale(1.1); opacity: 0.8; }
        }

        .status-timer {
            margin-left: auto;
            font-size: 0.75rem;
            opacity: 0.8;
        }

        .order-header {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(140px, 1fr));
            gap: 16px;
            padding-bottom: 18px;
            border-bottom: 2px dashed #d4e8c4;
            margin-bottom: 18px;
        }

        .order-header-item {
            display: flex;
            flex-direction: column;
            gap: 4px;
        }

        .order-header-item span:first-child {
            color: #6a9a6a;
            font-size: 0.72rem;
            text-transform: uppercase;
            letter-spacing: 1px;
            font-weight: 600;
        }

        .order-header-item strong {
            font-size: 0.98rem;
            color: #1a4d2e;
            font-weight: 700;
        }

        /* Product Row */
        .order-product {
            display: flex;
            gap: 18px;
            padding: 14px 0;
            border-bottom: 1px solid rgba(200, 220, 180, 0.5);
            transition: background 0.2s ease;
        }

        .order-product:last-child {
            border-bottom: none;
        }

        .order-product:hover {
            background: rgba(168, 213, 162, 0.1);
            margin: 0 -12px;
            padding-left: 12px;
            padding-right: 12px;
            border-radius: 16px;
        }

        .prod-img {
            width: 75px;
            height: 75px;
            object-fit: cover;
            border-radius: 18px;
            border: 2px solid #c8e0b8;
            box-shadow: 0 6px 16px -6px rgba(62, 102, 62, 0.3);
            transition: transform 0.3s ease;
        }

        .order-product:hover .prod-img {
            transform: scale(1.05);
        }

        .prod-info {
            flex: 1;
            display: flex;
            flex-direction: column;
            justify-content: center;
        }

        .prod-name {
            font-weight: 600;
            color: #1a4d2e;
            margin-bottom: 6px;
            font-size: 0.95rem;
        }

        .prod-meta {
            font-size: 0.8rem;
            color: #5a8a5a;
            display: flex;
            gap: 16px;
        }

        .prod-price {
            font-weight: 700;
            color: #22863a;
            display: flex;
            align-items: center;
            font-size: 1rem;
        }

        /* Order Footer */
        .order-footer {
            display: flex;
            flex-wrap: wrap;
            align-items: center;
            justify-content: space-between;
            margin-top: 22px;
            gap: 16px;
            padding-top: 18px;
            border-top: 1px solid rgba(200, 220, 180, 0.5);
        }

        /* Progress Tracker */
        .progress-tracker {
            flex: 1;
            min-width: 250px;
        }

        .progress-bar {
            height: 6px;
            background: #e5f0dd;
            border-radius: 10px;
            overflow: hidden;
            margin-bottom: 10px;
        }

        .progress-fill {
            height: 100%;
            background: linear-gradient(90deg, #4ade80, #22c55e);
            border-radius: 10px;
            transition: width 0.8s cubic-bezier(0.4, 0, 0.2, 1);
            position: relative;
        }

        .progress-fill::after {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: linear-gradient(90deg, transparent, rgba(255,255,255,0.4), transparent);
            animation: shimmer 2s infinite;
        }

        @keyframes shimmer {
            0% { transform: translateX(-100%); }
            100% { transform: translateX(100%); }
        }

        .progress-steps {
            display: flex;
            justify-content: space-between;
            font-size: 0.7rem;
            color: #6a9a6a;
        }

        .progress-step {
            display: flex;
            align-items: center;
            gap: 4px;
            transition: color 0.3s ease;
        }

        .progress-step.active {
            color: #22863a;
            font-weight: 600;
        }

        .progress-step i {
            font-size: 10px;
        }

        /* Action Buttons */
        .action-btns {
            display: flex;
            gap: 10px;
            flex-wrap: wrap;
        }

        .btn {
            padding: 12px 20px;
            border-radius: 50px;
            font-weight: 600;
            font-size: 0.82rem;
            cursor: pointer;
            transition: var(--transition-premium);
            display: inline-flex;
            align-items: center;
            gap: 8px;
            border: none;
            text-decoration: none;
        }

        .btn-outline {
            background: transparent;
            border: 2px solid #5a9a5a;
            color: #2a7a3a;
        }

        .btn-outline:hover {
            background: #5a9a5a;
            color: white;
            transform: translateY(-3px);
            box-shadow: 0 10px 20px -8px rgba(90, 154, 90, 0.4);
        }

        .btn-solid {
            background: linear-gradient(135deg, #22863a, #2ea44f);
            color: white;
            box-shadow: 0 6px 18px -4px rgba(34, 134, 58, 0.4);
        }

        .btn-solid:hover {
            background: linear-gradient(145deg, #1a6b2e, #22863a);
            transform: translateY(-3px) scale(1.02);
            box-shadow: 0 12px 24px -6px rgba(34, 134, 58, 0.5);
        }

        .btn-success {
            background: linear-gradient(135deg, #16a34a, #22c55e);
            color: white;
        }

        /* Empty State */
        .empty-state {
            text-align: center;
            background: linear-gradient(145deg, rgba(255,255,255,0.9), rgba(248,252,245,0.95));
            border-radius: 40px;
            padding: 60px 30px;
            border: 1px solid rgba(200, 220, 180, 0.5);
            box-shadow: var(--shadow-sm);
        }

        .empty-state-icon {
            width: 140px;
            height: 140px;
            margin: 0 auto 24px;
            background: linear-gradient(135deg, #d1fae5, #a7f3d0);
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 60px;
        }

        .empty-state h3 {
            color: #1a4d2e;
            font-family: 'Playfair Display', serif;
            font-size: 1.6rem;
            margin-bottom: 10px;
        }

        .empty-state p {
            color: #5a8a5a;
            margin-bottom: 24px;
        }

        .btn-shop {
            background: linear-gradient(135deg, #22863a, #2ea44f);
            color: white;
            padding: 16px 36px;
            border-radius: 50px;
            text-decoration: none;
            font-weight: 600;
            display: inline-flex;
            align-items: center;
            gap: 10px;
            transition: var(--transition-premium);
            box-shadow: 0 8px 20px -4px rgba(34, 134, 58, 0.4);
        }

        .btn-shop:hover {
            transform: translateY(-3px) scale(1.02);
            box-shadow: 0 12px 28px -4px rgba(34, 134, 58, 0.5);
        }

        /* Invoice Modal */
        .invoice-modal {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(15, 40, 20, 0.85);
            backdrop-filter: blur(10px);
            display: none;
            align-items: center;
            justify-content: center;
            z-index: 2000;
            padding: 20px;
            overflow-y: auto;
        }

        .invoice-card {
            background: linear-gradient(145deg, #ffffff, #f8fcf5);
            max-width: 520px;
            width: 100%;
            border-radius: 32px;
            padding: 36px;
            border: 2px solid #b8daaa;
            box-shadow: 0 40px 60px -20px rgba(26, 79, 46, 0.4);
            position: relative;
            animation: modalSlide 0.4s ease;
        }

        @keyframes modalSlide {
            from { opacity: 0; transform: translateY(30px) scale(0.95); }
            to { opacity: 1; transform: translateY(0) scale(1); }
        }

        .invoice-header {
            display: flex;
            justify-content: space-between;
            align-items: flex-start;
            margin-bottom: 24px;
            padding-bottom: 20px;
            border-bottom: 2px dashed #c8e0b8;
        }

        .invoice-brand {
            display: flex;
            align-items: center;
            gap: 14px;
        }

        .invoice-logo-icon {
            width: 52px;
            height: 52px;
            background: linear-gradient(135deg, #22863a, #22c55e);
            border-radius: 14px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 24px;
            color: white;
            box-shadow: 0 6px 16px rgba(34, 134, 58, 0.3);
        }

        .invoice-brand-text h2 {
            font-family: 'Playfair Display', serif;
            font-size: 1.4rem;
            color: #1a4d2e;
            font-weight: 700;
        }

        .invoice-brand-text span {
            font-size: 0.7rem;
            color: #6a9a6a;
            letter-spacing: 2px;
            text-transform: uppercase;
        }

        .invoice-qr {
            text-align: center;
        }

        .invoice-qr canvas {
            border-radius: 12px;
            padding: 8px;
            background: white;
            border: 1px solid #e5f0dd;
        }

        .invoice-qr-label {
            font-size: 0.65rem;
            color: #6a9a6a;
            margin-top: 6px;
            letter-spacing: 0.5px;
        }

        .invoice-title-section {
            text-align: center;
            margin-bottom: 24px;
        }

        .invoice-title {
            font-family: 'Playfair Display', serif;
            font-size: 1.8rem;
            font-weight: 700;
            color: #1a4d2e;
        }

        .invoice-number {
            color: #6a9a6a;
            font-size: 0.85rem;
            margin-top: 4px;
        }

        .invoice-details {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 16px;
            margin-bottom: 24px;
            padding: 18px;
            background: rgba(168, 213, 162, 0.1);
            border-radius: 18px;
        }

        .invoice-detail-item {
            display: flex;
            flex-direction: column;
            gap: 2px;
        }

        .invoice-detail-item label {
            font-size: 0.7rem;
            color: #6a9a6a;
            text-transform: uppercase;
            letter-spacing: 0.5px;
        }

        .invoice-detail-item span {
            font-weight: 600;
            color: #1a4d2e;
        }

        .invoice-items-header {
            display: grid;
            grid-template-columns: 2fr 1fr 1fr 1fr;
            gap: 12px;
            padding: 12px 0;
            border-bottom: 2px solid #1a4d2e;
            font-size: 0.75rem;
            font-weight: 600;
            color: #1a4d2e;
            text-transform: uppercase;
            letter-spacing: 0.5px;
        }

        .invoice-row {
            display: grid;
            grid-template-columns: 2fr 1fr 1fr 1fr;
            gap: 12px;
            padding: 14px 0;
            border-bottom: 1px solid #e5f0dd;
            font-size: 0.9rem;
        }

        .invoice-row:last-of-type {
            border-bottom: none;
        }

        .invoice-item-name {
            color: #1a4d2e;
            font-weight: 500;
        }

        .invoice-summary {
            margin-top: 20px;
            padding-top: 16px;
            border-top: 2px dashed #c8e0b8;
        }

        .invoice-summary-row {
            display: flex;
            justify-content: space-between;
            padding: 8px 0;
            font-size: 0.9rem;
        }

        .invoice-summary-row.total {
            font-size: 1.2rem;
            font-weight: 700;
            color: #22863a;
            padding-top: 16px;
            margin-top: 8px;
            border-top: 2px solid #22863a;
        }

        .invoice-footer {
            margin-top: 28px;
            text-align: center;
            padding-top: 20px;
            border-top: 1px solid #e5f0dd;
        }

        .invoice-footer p {
            color: #5a8a5a;
            font-size: 0.85rem;
            margin-bottom: 4px;
        }

        .invoice-footer-thanks {
            font-family: 'Playfair Display', serif;
            font-size: 1.1rem;
            color: #1a4d2e;
            font-weight: 600;
        }

        .invoice-close {
            position: absolute;
            top: 20px;
            right: 24px;
            font-size: 1.4rem;
            cursor: pointer;
            color: #5a8a5a;
            background: rgba(168, 213, 162, 0.2);
            width: 40px;
            height: 40px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: var(--transition-premium);
            border: none;
        }

        .invoice-close:hover {
            background: #22863a;
            color: white;
            transform: rotate(90deg);
        }

        .download-btn {
            background: linear-gradient(135deg, #22863a, #22c55e);
            color: white;
            border: none;
            padding: 14px 24px;
            border-radius: 50px;
            font-weight: 600;
            margin-top: 24px;
            width: 100%;
            cursor: pointer;
            transition: var(--transition-premium);
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 10px;
            font-size: 0.95rem;
            box-shadow: 0 8px 20px -4px rgba(34, 134, 58, 0.4);
        }

        .download-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 12px 28px -4px rgba(34, 134, 58, 0.5);
        }

        /* Track Modal */
        .track-modal {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(15, 40, 20, 0.85);
            backdrop-filter: blur(10px);
            display: none;
            align-items: center;
            justify-content: center;
            z-index: 2100;
            padding: 20px;
            overflow-y: auto;
        }

        .track-card {
            background: linear-gradient(145deg, #ffffff, #f8fcf5);
            max-width: 480px;
            width: 100%;
            border-radius: 32px;
            padding: 32px;
            border: 2px solid #b8daaa;
            animation: modalSlide 0.4s ease;
        }

        .track-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 24px;
        }

        .track-header h3 {
            font-family: 'Playfair Display', serif;
            font-size: 1.4rem;
            color: #1a4d2e;
        }

        .track-close {
            width: 36px;
            height: 36px;
            border-radius: 50%;
            background: rgba(168, 213, 162, 0.2);
            border: none;
            cursor: pointer;
            font-size: 1.2rem;
            color: #5a8a5a;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: var(--transition-premium);
        }

        .track-close:hover {
            background: #22863a;
            color: white;
        }

        .track-order-info {
            background: rgba(168, 213, 162, 0.15);
            border-radius: 20px;
            padding: 18px;
            margin-bottom: 28px;
        }

        .track-order-info-row {
            display: flex;
            justify-content: space-between;
            padding: 6px 0;
            font-size: 0.9rem;
        }

        .track-order-info-row label {
            color: #6a9a6a;
        }

        .track-order-info-row span {
            font-weight: 600;
            color: #1a4d2e;
        }

        .track-timeline {
            position: relative;
            padding-left: 30px;
        }

        .track-timeline::before {
            content: '';
            position: absolute;
            left: 10px;
            top: 0;
            bottom: 0;
            width: 2px;
            background: #e5f0dd;
        }

        .track-step-item {
            position: relative;
            padding: 18px 0;
            display: flex;
            gap: 16px;
        }

        .track-dot {
            position: absolute;
            left: -24px;
            top: 22px;
            width: 20px;
            height: 20px;
            border-radius: 50%;
            background: #e5f0dd;
            border: 3px solid white;
            box-shadow: 0 0 0 2px #e5f0dd;
            transition: var(--transition-premium);
        }

        .track-dot.completed {
            background: #22863a;
            box-shadow: 0 0 0 2px #22863a, 0 0 12px rgba(34, 134, 58, 0.4);
        }

        .track-dot.active {
            background: #f59e0b;
            box-shadow: 0 0 0 2px #f59e0b, 0 0 12px rgba(245, 158, 11, 0.4);
            animation: pulse 2s infinite;
        }

        .track-info h4 {
            font-size: 0.95rem;
            color: #1a4d2e;
            margin-bottom: 4px;
        }

        .track-info p {
            font-size: 0.8rem;
            color: #6a9a6a;
        }

        .track-info .completed-text {
            color: #22863a;
            font-weight: 500;
        }

        .track-info .pending-text {
            color: #9ca3af;
        }

        /* Toast Notification */
        .toast {
            position: fixed;
            bottom: 30px;
            left: 50%;
            transform: translateX(-50%) translateY(100px);
            background: linear-gradient(135deg, #22863a, #22c55e);
            color: white;
            padding: 16px 28px;
            border-radius: 50px;
            font-weight: 600;
            display: flex;
            align-items: center;
            gap: 12px;
            box-shadow: 0 10px 30px rgba(34, 134, 58, 0.4);
            z-index: 3000;
            opacity: 0;
            transition: all 0.4s cubic-bezier(0.68, -0.55, 0.265, 1.55);
        }

        .toast.show {
            transform: translateX(-50%) translateY(0);
            opacity: 1;
        }

        /* Responsive */
        @media (max-width: 768px) {
            .navbar {
                padding: 12px 16px;
            }

            .logo {
                font-size: 20px;
            }

            .logo-icon {
                width: 36px;
                height: 36px;
                font-size: 16px;
            }

            .page-title {
                font-size: 1.6rem;
            }

            .order-header {
                grid-template-columns: 1fr 1fr;
            }

            .order-footer {
                flex-direction: column;
                align-items: stretch;
            }

            .progress-tracker {
                margin-bottom: 16px;
            }

            .action-btns {
                justify-content: center;
            }

            .invoice-items-header,
            .invoice-row {
                grid-template-columns: 1.5fr 1fr 1fr;
            }

            .invoice-items-header > div:nth-child(3),
            .invoice-row > div:nth-child(3) {
                display: none;
            }
        }

        @media (max-width: 480px) {
            .nav-link span {
                display: none;
            }

            .nav-link {
                padding: 10px 14px;
            }

            .invoice-header {
                flex-direction: column;
                gap: 20px;
                align-items: center;
            }

            .invoice-details {
                grid-template-columns: 1fr;
            }
        }
    </style>
</head>
<body>
    <!-- Background Decorations -->
    <div class="bg-decoration bg-leaf-1"></div>
    <div class="bg-decoration bg-leaf-2"></div>
    <div class="bg-decoration bg-leaf-3"></div>

    <!-- Navbar -->
    <nav class="navbar" id="mainNavbar">
        <a href="products.html" class="logo">
            <div class="logo-icon">
                <i class="fas fa-seedling"></i>
            </div>
            <div class="logo-text">
                Green Garden
                <span class="logo-sub">heirloom seeds</span>
            </div>
        </a>
        <div class="nav-links">
            <a href="products.html" class="nav-link">
                <i class="fas fa-leaf"></i>
                <span>Shop</span>
            </a>
            <a href="orders.html" class="nav-link active">
                <i class="fas fa-box"></i>
                <span>Orders</span>
            </a>
            <a href="cart.html" class="nav-link" id="cartLink">
                <i class="fas fa-shopping-bag"></i>
                <span>Cart</span>
                <span class="cart-badge" id="cartBadge" style="display: none;">0</span>
            </a>
        </div>
    </nav>

    <!-- Main Container -->
    <div class="container">
        <div class="page-header">
            <h1 class="page-title">My Orders</h1>
            <p class="page-subtitle">Track your green journey with us</p>
        </div>
        <div id="orderList">
            <!-- Orders dynamically inserted -->
        </div>
    </div>

    <!-- Invoice Modal -->
    <div id="invoiceModal" class="invoice-modal">
        <div class="invoice-card" id="invoiceContent">
            <!-- Dynamic invoice content -->
        </div>
    </div>

    <!-- Track Modal -->
    <div id="trackModal" class="track-modal">
        <div class="track-card" id="trackContent">
            <!-- Dynamic track info -->
        </div>
    </div>

    <!-- Toast Notification -->
    <div id="toast" class="toast">
        <i class="fas fa-check-circle"></i>
        <span id="toastMessage">Items added to cart!</span>
    </div>

    <script>
        // ========== INITIALIZATION ==========
        const { jsPDF } = window.jspdf;

        // Scroll shrink effect
        window.addEventListener('scroll', function() {
            const navbar = document.getElementById('mainNavbar');
            if (window.scrollY > 30) {
                navbar.classList.add('shrink');
            } else {
                navbar.classList.remove('shrink');
            }
        });

        // ========== CART BADGE UPDATE ==========
        function updateCartBadge() {
            const cart = JSON.parse(localStorage.getItem('cart')) || [];
            const badge = document.getElementById('cartBadge');
            const totalItems = cart.reduce((sum, item) => sum + (item.quantity || 1), 0);
            
            if (totalItems > 0) {
                badge.textContent = totalItems > 99 ? '99+' : totalItems;
                badge.style.display = 'flex';
                badge.style.animation = 'none';
                badge.offsetHeight; // Trigger reflow
                badge.style.animation = 'badgePop 0.3s ease';
            } else {
                badge.style.display = 'none';
            }
        }

        // ========== TOAST NOTIFICATION ==========
        function showToast(message, icon = 'check-circle') {
            const toast = document.getElementById('toast');
            const toastMessage = document.getElementById('toastMessage');
            const toastIcon = toast.querySelector('i');
            
            toastMessage.textContent = message;
            toastIcon.className = `fas fa-${icon}`;
            toast.classList.add('show');
            
            setTimeout(() => {
                toast.classList.remove('show');
            }, 3000);
        }

        // ========== HELPER FUNCTIONS ==========
        function formatDate(dateStr) {
            if (!dateStr) return 'N/A';
            return dateStr;
        }

        function generateOrderId() {
            return 'GG' + Date.now().toString(36).toUpperCase();
        }

        // ========== REAL-TIME STATUS SIMULATION ==========
        function simulateOrderProgress() {
            const orders = JSON.parse(localStorage.getItem('orders')) || [];
            let updated = false;

            orders.forEach(order => {
                if (!order.status) order.status = 'Processing';
                if (!order.statusHistory) {
                    order.statusHistory = {
                        placed: order.date,
                        processing: order.date,
                        shipped: null,
                        delivered: null
                    };
                }

                const orderDate = new Date(order.date.split('/').reverse().join('-') || Date.now());
                const now = new Date();
                const daysPassed = Math.floor((now - orderDate) / (1000 * 60 * 60 * 24));

                if (order.status === 'Processing' && daysPassed >= 1) {
                    order.status = 'Shipped';
                    order.statusHistory.shipped = new Date().toLocaleDateString('en-IN');
                    updated = true;
                }
                if (order.status === 'Shipped' && daysPassed >= 3) {
                    order.status = 'Delivered';
                    order.statusHistory.delivered = new Date().toLocaleDateString('en-IN');
                    updated = true;
                }
            });

            if (updated) {
                localStorage.setItem('orders', JSON.stringify(orders));
            }
        }

        // ========== REORDER FUNCTIONALITY ==========
        function reorder(order) {
            let cart = JSON.parse(localStorage.getItem('cart')) || [];
            let addedCount = 0;

            order.items.forEach(item => {
                const existing = cart.find(c => c.id === item.id);
                if (existing) {
                    existing.quantity += item.quantity || 1;
                } else {
                    cart.push({
                        id: item.id || Date.now().toString(),
                        name: item.name,
                        price: item.price,
                        image: item.image,
                        quantity: item.quantity || 1
                    });
                }
                addedCount++;
            });

            localStorage.setItem('cart', JSON.stringify(cart));
            updateCartBadge();
            showToast(`${addedCount} item${addedCount > 1 ? 's' : ''} added to cart!`, 'shopping-cart');
        }

        // ========== PDF INVOICE GENERATION ==========
        function generatePDFInvoice(order) {
            const doc = new jsPDF({
                orientation: 'portrait',
                unit: 'mm',
                format: 'a4'
            });

            // Colors
            const primaryGreen = '#1a4d2e';
            const accentGreen = '#22863a';
            const lightGreen = '#e5f0dd';
            const darkText = '#1a1a1a';
            const grayText = '#666666';

            // Header Background
            doc.setFillColor(26, 77, 46);
            doc.rect(0, 0, 210, 50, 'F');

            // Decorative leaf pattern (simplified)
            doc.setFillColor(34, 134, 58);
            doc.circle(180, 25, 30, 'F');
            doc.setFillColor(26, 77, 46);
            doc.circle(185, 20, 25, 'F');

            // Logo Icon (simplified square with rounded corners)
            doc.setFillColor(255, 255, 255);
            doc.roundedRect(15, 12, 26, 26, 4, 4, 'F');
            doc.setFillColor(34, 134, 58);
            doc.roundedRect(17, 14, 22, 22, 3, 3, 'F');
            
            // Leaf icon text
            doc.setTextColor(255, 255, 255);
            doc.setFontSize(14);
            doc.text('GG', 28, 28, { align: 'center' });

            // Company Name
            doc.setTextColor(255, 255, 255);
            doc.setFontSize(22);
            doc.setFont('helvetica', 'bold');
            doc.text('Green Garden', 50, 22);
            
            doc.setFontSize(8);
            doc.setFont('helvetica', 'normal');
            doc.text('HEIRLOOM SEEDS', 50, 29);

            // QR Code placeholder (right side)
            doc.setFillColor(255, 255, 255);
            doc.roundedRect(165, 55, 30, 30, 2, 2, 'F');
            doc.setDrawColor(200, 220, 180);
            doc.setLineWidth(0.5);
            doc.roundedRect(165, 55, 30, 30, 2, 2, 'S');
            
            // QR pattern simulation
            doc.setFillColor(26, 77, 46);
            for (let i = 0; i < 5; i++) {
                for (let j = 0; j < 5; j++) {
                    if (Math.random() > 0.5) {
                        doc.rect(168 + i * 5, 58 + j * 5, 4, 4, 'F');
                    }
                }
            }
            // QR corners
            doc.rect(168, 58, 10, 10, 'F');
            doc.rect(182, 58, 10, 10, 'F');
            doc.rect(168, 72, 10, 10, 'F');
            doc.setFillColor(255, 255, 255);
            doc.rect(170, 60, 6, 6, 'F');
            doc.rect(184, 60, 6, 6, 'F');
            doc.rect(170, 74, 6, 6, 'F');
            doc.setFillColor(26, 77, 46);
            doc.rect(172, 62, 2, 2, 'F');
            doc.rect(186, 62, 2, 2, 'F');
            doc.rect(172, 76, 2, 2, 'F');

            doc.setFontSize(6);
            doc.setTextColor(102, 102, 102);
            doc.text('Scan to verify', 180, 88, { align: 'center' });

            // Invoice Title
            doc.setTextColor(26, 77, 46);
            doc.setFontSize(28);
            doc.setFont('helvetica', 'bold');
            doc.text('INVOICE', 15, 65);

            // Order Details Box
            doc.setFillColor(245, 252, 248);
            doc.roundedRect(15, 72, 140, 35, 3, 3, 'F');

            doc.setFontSize(9);
            doc.setFont('helvetica', 'normal');
            doc.setTextColor(102, 102, 102);
            
            const detailsY = 80;
            doc.text('Invoice Number:', 20, detailsY);
            doc.text('Date:', 20, detailsY + 8);
            doc.text('Payment Method:', 20, detailsY + 16);
            
            doc.setFont('helvetica', 'bold');
            doc.setTextColor(26, 26, 26);
            doc.text(order.id || 'N/A', 60, detailsY);
            doc.text(formatDate(order.date), 60, detailsY + 8);
            doc.text(order.method || 'Card Payment', 60, detailsY + 16);

            doc.setTextColor(102, 102, 102);
            doc.setFont('helvetica', 'normal');
            doc.text('Customer:', 95, detailsY);
            doc.text('Status:', 95, detailsY + 8);
            
            doc.setFont('helvetica', 'bold');
            doc.setTextColor(26, 26, 26);
            doc.text(order.customer || 'John Doe', 115, detailsY);
            doc.text(order.status || 'Processing', 115, detailsY + 8);

            // Items Table Header
            doc.setFillColor(26, 77, 46);
            doc.rect(15, 115, 180, 10, 'F');
            
            doc.setTextColor(255, 255, 255);
            doc.setFontSize(10);
            doc.setFont('helvetica', 'bold');
            doc.text('Item Description', 20, 122);
            doc.text('Qty', 120, 122);
            doc.text('Price', 145, 122);
            doc.text('Total', 170, 122);

            // Items
            let yPos = 132;
            doc.setTextColor(26, 26, 26);
            doc.setFont('helvetica', 'normal');
            doc.setFontSize(10);

            (order.items || []).forEach((item, index) => {
                if (yPos > 240) {
                    doc.addPage();
                    yPos = 20;
                }

                // Alternate row background
                if (index % 2 === 0) {
                    doc.setFillColor(250, 255, 250);
                    doc.rect(15, yPos - 6, 180, 10, 'F');
                }

                const itemTotal = (item.price || 0) * (item.quantity || 1);
                doc.text(item.name || 'Unknown Item', 20, yPos);
                doc.text(String(item.quantity || 1), 125, yPos, { align: 'center' });
                doc.text(`Rs.${(item.price || 0).toFixed(2)}`, 150, yPos, { align: 'right' });
                doc.text(`Rs.${itemTotal.toFixed(2)}`, 185, yPos, { align: 'right' });
                
                yPos += 10;
            });

            // Summary Section
            yPos += 10;
            doc.setDrawColor(200, 220, 180);
            doc.setLineWidth(0.5);
            doc.line(15, yPos - 5, 195, yPos - 5);

            doc.setFillColor(245, 252, 248);
            doc.roundedRect(120, yPos, 75, 40, 3, 3, 'F');

            doc.setFontSize(10);
            doc.setTextColor(102, 102, 102);
            doc.text('Subtotal:', 125, yPos + 10);
            doc.text('Shipping:', 125, yPos + 18);
            doc.text('Tax:', 125, yPos + 26);

            doc.setTextColor(26, 26, 26);
            doc.text(`Rs.${(order.total || 0).toFixed(2)}`, 190, yPos + 10, { align: 'right' });
            doc.setTextColor(34, 134, 58);
            doc.text('FREE', 190, yPos + 18, { align: 'right' });
            doc.setTextColor(26, 26, 26);
            doc.text('Rs.0.00', 190, yPos + 26, { align: 'right' });

            // Total
            doc.setFillColor(26, 77, 46);
            doc.rect(120, yPos + 32, 75, 12, 'F');
            doc.setTextColor(255, 255, 255);
            doc.setFontSize(12);
            doc.setFont('helvetica', 'bold');
            doc.text('TOTAL:', 125, yPos + 40);
            doc.text(`Rs.${(order.total || 0).toFixed(2)}`, 190, yPos + 40, { align: 'right' });

            // Footer
            const footerY = 270;
            doc.setDrawColor(200, 220, 180);
            doc.line(15, footerY, 195, footerY);

            doc.setFontSize(9);
            doc.setTextColor(102, 102, 102);
            doc.setFont('helvetica', 'normal');
            doc.text('Thank you for growing with Green Garden!', 105, footerY + 10, { align: 'center' });

            doc.setFontSize(7);
            doc.text('Green Garden | 123 Garden Street, Green City | support@greengarden.com | +91 98765 43210', 105, footerY + 18, { align: 'center' });

            // Save PDF
            doc.save(`Invoice_${order.id || 'Order'}.pdf`);
        }

        // ========== SHOW INVOICE MODAL ==========
        function showInvoice(order) {
            const modal = document.getElementById('invoiceModal');
            const content = document.getElementById('invoiceContent');

            // Generate QR data
            const qrData = JSON.stringify({
                orderId: order.id,
                total: order.total,
                date: order.date,
                items: order.items.map(i => ({ name: i.name, qty: i.quantity }))
            });

            const itemsList = (order.items || []).map(item => `
                <div class="invoice-row">
                    <span class="invoice-item-name">${item.name || 'Item'}</span>
                    <span style="text-align:center;">${item.quantity || 1}</span>
                    <span style="text-align:right;">Rs.${(item.price || 0).toFixed(2)}</span>
                    <span style="text-align:right;">Rs.${((item.price || 0) * (item.quantity || 1)).toFixed(2)}</span>
                </div>
            `).join('');

            content.innerHTML = `
                <button class="invoice-close" onclick="closeInvoiceModal()">&times;</button>
                
                <div class="invoice-header">
                    <div class="invoice-brand">
                        <div class="invoice-logo-icon">
                            <i class="fas fa-seedling"></i>
                        </div>
                        <div class="invoice-brand-text">
                            <h2>Green Garden</h2>
                            <span>Heirloom Seeds</span>
                        </div>
                    </div>
                    <div class="invoice-qr">
                        <div id="invoiceQR"></div>
                        <div class="invoice-qr-label">Scan to verify</div>
                    </div>
                </div>

                <div class="invoice-title-section">
                    <h1 class="invoice-title">INVOICE</h1>
                    <p class="invoice-number">#${order.id || 'N/A'}</p>
                </div>

                <div class="invoice-details">
                    <div class="invoice-detail-item">
                        <label>Invoice Date</label>
                        <span>${formatDate(order.date)}</span>
                    </div>
                    <div class="invoice-detail-item">
                        <label>Payment Method</label>
                        <span>${order.method || 'Card Payment'}</span>
                    </div>
                    <div class="invoice-detail-item">
                        <label>Customer</label>
                        <span>${order.customer || 'John Doe'}</span>
                    </div>
                    <div class="invoice-detail-item">
                        <label>Status</label>
                        <span>${order.status || 'Processing'}</span>
                    </div>
                </div>

                <div class="invoice-items-header">
                    <div>Item</div>
                    <div style="text-align:center;">Qty</div>
                    <div style="text-align:right;">Price</div>
                    <div style="text-align:right;">Total</div>
                </div>
                ${itemsList}

                <div class="invoice-summary">
                    <div class="invoice-summary-row">
                        <span>Subtotal</span>
                        <span>Rs.${(order.total || 0).toFixed(2)}</span>
                    </div>
                    <div class="invoice-summary-row">
                        <span>Shipping</span>
                        <span style="color: #22863a;">FREE</span>
                    </div>
                    <div class="invoice-summary-row">
                        <span>Tax</span>
                        <span>Rs.0.00</span>
                    </div>
                    <div class="invoice-summary-row total">
                        <span>TOTAL</span>
                        <span>Rs.${(order.total || 0).toFixed(2)}</span>
                    </div>
                </div>

                <div class="invoice-footer">
                    <p class="invoice-footer-thanks">Thank you for growing with Green Garden!</p>
                    <p>123 Garden Street, Green City | support@greengarden.com</p>
                </div>

                <button class="download-btn" onclick="generatePDFInvoice(${JSON.stringify(order).replace(/"/g, '&quot;')})">
                    <i class="fas fa-file-pdf"></i>
                    Download PDF Invoice
                </button>
            `;

            modal.style.display = 'flex';

            // Generate QR Code
            setTimeout(() => {
                const qrContainer = document.getElementById('invoiceQR');
                if (qrContainer && typeof QRCode !== 'undefined') {
                    qrContainer.innerHTML = '';
                    new QRCode(qrContainer, {
                        text: qrData,
                        width: 80,
                        height: 80,
                        colorDark: '#1a4d2e',
                        colorLight: '#ffffff',
                        correctLevel: QRCode.CorrectLevel.M
                    });
                }
            }, 100);
        }

        function closeInvoiceModal() {
            document.getElementById('invoiceModal').style.display = 'none';
        }

        // ========== TRACK DETAILS MODAL ==========
        function showTrackDetails(order) {
            const modal = document.getElementById('trackModal');
            const content = document.getElementById('trackContent');

            const status = order.status || 'Processing';
            const steps = [
                { 
                    label: 'Order Placed', 
                    desc: 'Your order has been confirmed',
                    done: true,
                    date: order.statusHistory?.placed || order.date
                },
                { 
                    label: 'Processing', 
                    desc: 'We are preparing your plants',
                    done: ['Processing', 'Shipped', 'Delivered'].includes(status),
                    active: status === 'Processing',
                    date: order.statusHistory?.processing
                },
                { 
                    label: 'Shipped', 
                    desc: 'Your order is on the way',
                    done: ['Shipped', 'Delivered'].includes(status),
                    active: status === 'Shipped',
                    date: order.statusHistory?.shipped
                },
                { 
                    label: 'Delivered', 
                    desc: 'Package delivered successfully',
                    done: status === 'Delivered',
                    active: false,
                    date: order.statusHistory?.delivered
                }
            ];

            // Calculate estimated delivery
            const orderDate = new Date(order.date?.split('/').reverse().join('-') || Date.now());
            const estDelivery = new Date(orderDate);
            estDelivery.setDate(estDelivery.getDate() + 4);
            const deliveryText = status === 'Delivered' 
                ? `Delivered on ${order.statusHistory?.delivered || 'N/A'}` 
                : `Expected by ${estDelivery.toLocaleDateString('en-IN')}`;

            const stepsHtml = steps.map(step => `
                <div class="track-step-item">
                    <div class="track-dot ${step.done ? 'completed' : ''} ${step.active ? 'active' : ''}"></div>
                    <div class="track-info">
                        <h4>${step.label}</h4>
                        <p>${step.desc}</p>
                        ${step.done ? `<p class="completed-text"><i class="fas fa-check-circle"></i> ${step.date || 'Completed'}</p>` : '<p class="pending-text">Pending</p>'}
                    </div>
                </div>
            `).join('');

            content.innerHTML = `
                <div class="track-header">
                    <h3>Track Your Order</h3>
                    <button class="track-close" onclick="closeTrackModal()">&times;</button>
                </div>

                <div class="track-order-info">
                    <div class="track-order-info-row">
                        <label>Order ID</label>
                        <span>${order.id || 'N/A'}</span>
                    </div>
                    <div class="track-order-info-row">
                        <label>Status</label>
                        <span>${status}</span>
                    </div>
                    <div class="track-order-info-row">
                        <label>Delivery</label>
                        <span>${deliveryText}</span>
                    </div>
                </div>

                <div class="track-timeline">
                    ${stepsHtml}
                </div>
            `;

            modal.style.display = 'flex';
        }

        function closeTrackModal() {
            document.getElementById('trackModal').style.display = 'none';
        }

        // ========== LOAD ORDERS ==========
        function loadOrders() {
            // Simulate real-time progress
            simulateOrderProgress();

            const orders = JSON.parse(localStorage.getItem('orders')) || [];
            const container = document.getElementById('orderList');

            if (orders.length === 0) {
                container.innerHTML = `
                    <div class="empty-state">
                        <div class="empty-state-icon">
                            <i class="fas fa-seedling"></i>
                        </div>
                        <h3>Your garden is waiting</h3>
                        <p>Start your green journey with our premium seeds and plants</p>
                        <a href="products.html" class="btn-shop">
                            <i class="fas fa-leaf"></i>
                            Start Shopping
                        </a>
                    </div>
                `;
                return;
            }

            container.innerHTML = '';

            orders.slice().reverse().forEach(order => {
                const status = order.status || 'Processing';
                
                // Status banner
                let statusBanner = '';
                if (status === 'Processing') {
                    statusBanner = `
                        <div class="status-banner processing">
                            <div class="status-icon"><i class="fas fa-clock"></i></div>
                            <div>
                                <strong>Processing</strong>
                                <p style="font-size:0.75rem;opacity:0.8;">We're preparing your order</p>
                            </div>
                            <div class="status-timer">Est. 1-2 days</div>
                        </div>
                    `;
                } else if (status === 'Shipped') {
                    statusBanner = `
                        <div class="status-banner shipped">
                            <div class="status-icon"><i class="fas fa-truck"></i></div>
                            <div>
                                <strong>On the Way</strong>
                                <p style="font-size:0.75rem;opacity:0.8;">Your order is being delivered</p>
                            </div>
                            <div class="status-timer">Arriving soon</div>
                        </div>
                    `;
                } else if (status === 'Delivered') {
                    statusBanner = `
                        <div class="status-banner delivered">
                            <div class="status-icon"><i class="fas fa-check"></i></div>
                            <div>
                                <strong>Delivered</strong>
                                <p style="font-size:0.75rem;opacity:0.8;">Package arrived successfully</p>
                            </div>
                        </div>
                    `;
                }

                // Progress percentage
                let progressPercent = 33;
                if (status === 'Shipped') progressPercent = 66;
                if (status === 'Delivered') progressPercent = 100;

                const orderDiv = document.createElement('div');
                orderDiv.className = 'order-card';

                let headerHtml = `
                    ${statusBanner}
                    <div class="order-header">
                        <div class="order-header-item">
                            <span>Order ID</span>
                            <strong>${order.id || 'N/A'}</strong>
                        </div>
                        <div class="order-header-item">
                            <span>Total Amount</span>
                            <strong>Rs.${(order.total || 0).toFixed(2)}</strong>
                        </div>
                        <div class="order-header-item">
                            <span>Order Date</span>
                            <strong>${formatDate(order.date)}</strong>
                        </div>
                        <div class="order-header-item">
                            <span>Payment</span>
                            <strong>${order.method || 'Card'}</strong>
                        </div>
                    </div>
                `;

                let productsHtml = '';
                (order.items || []).forEach(item => {
                    productsHtml += `
                        <div class="order-product">
                            <img src="${item.image || 'https://images.unsplash.com/photo-1416879595882-3373a0480b5b?w=100&h=100&fit=crop'}" 
                                 onerror="this.src='https://images.unsplash.com/photo-1416879595882-3373a0480b5b?w=100&h=100&fit=crop'" 
                                 class="prod-img" alt="${item.name || 'Product'}">
                            <div class="prod-info">
                                <div class="prod-name">${item.name || 'Unknown Item'}</div>
                                <div class="prod-meta">
                                    <span>Qty: ${item.quantity || 1}</span>
                                    <span>Rs.${(item.price || 0).toFixed(2)} each</span>
                                </div>
                            </div>
                            <div class="prod-price">Rs.${((item.price || 0) * (item.quantity || 1)).toFixed(2)}</div>
                        </div>
                    `;
                });

                const footerHtml = `
                    <div class="order-footer">
                        <div class="progress-tracker">
                            <div class="progress-bar">
                                <div class="progress-fill" style="width: ${progressPercent}%"></div>
                            </div>
                            <div class="progress-steps">
                                <div class="progress-step ${progressPercent >= 33 ? 'active' : ''}">
                                    <i class="fas fa-check-circle"></i> Placed
                                </div>
                                <div class="progress-step ${progressPercent >= 66 ? 'active' : ''}">
                                    <i class="fas fa-truck"></i> Shipped
                                </div>
                                <div class="progress-step ${progressPercent >= 100 ? 'active' : ''}">
                                    <i class="fas fa-box-open"></i> Delivered
                                </div>
                            </div>
                        </div>
                        <div class="action-btns">
                            <button class="btn btn-outline" onclick='reorder(${JSON.stringify(order).replace(/'/g, "\\'")})'>
                                <i class="fas fa-redo"></i> Reorder
                            </button>
                            <button class="btn btn-outline" onclick='showTrackDetails(${JSON.stringify(order).replace(/'/g, "\\'")})'>
                                <i class="fas fa-map-marker-alt"></i> Track
                            </button>
                            <button class="btn btn-solid" onclick='showInvoice(${JSON.stringify(order).replace(/'/g, "\\'")})'>
                                <i class="fas fa-file-invoice"></i> Invoice
                            </button>
                        </div>
                    </div>
                `;

                orderDiv.innerHTML = headerHtml + productsHtml + footerHtml;
                container.appendChild(orderDiv);
            });
        }

        // ========== EVENT LISTENERS ==========
        document.getElementById('invoiceModal').addEventListener('click', function(e) {
            if (e.target === this) closeInvoiceModal();
        });

        document.getElementById('trackModal').addEventListener('click', function(e) {
            if (e.target === this) closeTrackModal();
        });

        document.addEventListener('keydown', function(e) {
            if (e.key === 'Escape') {
                closeInvoiceModal();
                closeTrackModal();
            }
        });

        // Initialize
        document.addEventListener('DOMContentLoaded', function() {
            updateCartBadge();
            loadOrders();
        });

        // Update cart badge on storage change
        window.addEventListener('storage', function(e) {
            if (e.key === 'cart') {
                updateCartBadge();
            }
        });
    </script>
</body>
</html>
